{% extends "base.html" %}

{% block content %}
  <h2>Book List</h2>

  <table border="1" cellpadding="8" cellspacing="0">
      <thead>
          <tr>
              <th>Title</th>
              <th>Author</th>
              <th>Year</th>
              <th>Actions</th>
          </tr>
      </thead>
      <tbody>
          {% for book in books %}
              <tr>
                  <td>{{ book.title }}</td>
                  <td>{{ book.author }}</td>
                  <td>{{ book.publication_year }}</td>
                  <td>
                      {% if perms.bookshelf.can_edit %}
                          <a href="{% url 'book_edit' book.pk %}">Edit</a>
                      {% endif %}
                      {% if perms.bookshelf.can_delete %}
                          | <a href="{% url 'book_delete' book.pk %}" 
                               onclick="return confirm('Are you sure you want to delete this book?');">
                               Delete
                            </a>
                      {% endif %}
                  </td>
              </tr>
          {% empty %}
              <tr>
                  <td colspan="4">No books available.</td>
              </tr>
          {% endfor %}
      </tbody>
  </table>

  {% if perms.bookshelf.can_create %}
      <p><a href="{% url 'book_create' %}">Add New Book</a></p>
  {% endif %}
{% endblock %}
